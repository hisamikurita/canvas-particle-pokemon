!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([,function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"norm",value:function(t,e,n){return(t-e)/(n-e)}},{key:"lerp",value:function(t,e,n){return(n-e)*t+e}},{key:"map",value:function(e,n,i,r,a){return t.lerp(t.norm(e,n,i),r,a)}},{key:"clamp",value:function(t,e,n){return Math.min(Math.max(t,Math.min(e,n)),Math.max(e,n))}},{key:"distance",value:function(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}},{key:"distanceXY",value:function(t,e,n,i){var r=n-t,a=i-e;return Math.sqrt(r*r+a*a)}},{key:"circleCollision",value:function(e,n){return t.distance(e,n)<=e.radius+n.radius}},{key:"circlePointCollision",value:function(e,n,i){return t.distanceXY(e,n,i.x,i.y)<i.radius}},{key:"pointInRect",value:function(e,n,i){return t.inRange(e,i.x,i.x+i.width)&&t.inRange(n,i.y,i.y+i.height)}},{key:"inRange",value:function(t,e,n){return t>=Math.min(e,n)&&t<=Math.max(e,n)}},{key:"rangeIntersect",value:function(t,e,n,i){return Math.max(t,e)>=Math.min(n,i)&&Math.min(t,e)<=Math.max(n,i)}},{key:"rectIntersect",value:function(e,n){return t.rangeIntersect(e.x,e.x+e.width,n.x,n.x+n.width)&&t.rangeIntersect(e.y,e.y+e.height,n.y,n.y+n.height)}},{key:"degreesToRads",value:function(t){return t/180*Math.PI}},{key:"radsToDegrees",value:function(t){return 180*t/Math.PI}},{key:"randomRange",value:function(t,e){return t+Math.random()*(e-t)}},{key:"randomInt",value:function(t,e){return Math.floor(t+Math.random()*(e-t+1))}},{key:"randomDist",value:function(e,n,i){for(var r=0,a=0;a<i;a+=1)r+=t.randomRange(e,n);return r/i}},{key:"randomColor",value:function(t){return t[Math.floor(Math.random()*t.length)]}}],(n=null)&&i(e.prototype,n),r&&i(e,r),t}();function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o={};window.addEventListener("mousemove",(function(t){o.x=t.clientX,o.y=t.clientY}));var u=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.querySelector("#canvas"),this.ctx=canvas.getContext("2d"),this.color=i,this.x=Math.random()*this.canvas.width,this.y=Math.random()*this.canvas.height,this.x2=e,this.y2=n,this.vx=0,this.vy=0,this.dx=0,this.dy=0,this.ax=Math.random()-.5,this.ay=Math.random()-.5,this.radius=2,this.friction=.05*Math.random()+.94,this.speed=20}var e,n,i;return e=t,(n=[{key:"update",value:function(){this.dist=r.distanceXY(this.x,this.y,o.x,o.y),this.dist<20*this.radius&&(this.dx+=this.ax*o.x/300,this.dy+=this.ay*o.y/300),this.vx=(this.x2-this.x)/this.speed,this.vy=(this.y2-this.y)/this.speed,this.x+=this.vx,this.y+=this.vy,this.dx*=this.friction,this.dy*=this.friction,this.x+=this.dx,this.y+=this.dy}},{key:"draw",value:function(){this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),this.ctx.fillStyle=this.color,this.ctx.fill(),this.ctx.restore()}}])&&a(e.prototype,n),i&&a(e,i),t}();!function(){window.addEventListener("load",(function(){(e=new Stats).domElement.style.position="absolute",e.domElement.style.left="0px",e.domElement.style.right="0px",document.getElementById("stats").appendChild(e.domElement),d(),c()})),window.onresize=function(){r.width=window.innerWidth,r.height=window.innerHeight,s=[],d()};var t,e,n=document.createElement("canvas"),i=n.getContext("2d"),r=document.querySelector("#canvas"),a=r.getContext("2d"),o=0,s=[],h=0;function d(){!function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=t}();var e=window.innerWidth,a=window.innerHeight;n.width=e,n.height=a;var d=new Image;d.src="./images/img02.png",d.addEventListener("load",(function(){i.drawImage(d,(e-d.width)/2,(a-d.height)/2);var n=i.getImageData(0,0,e,a).data;r.width=e,r.height=a;for(var c=0;c<e;c+=Math.round(e/h))for(var l=0;l<a;l+=Math.round(e/h))n[4*(c+l*e)+3]>h&&(t="rgb("+n[4*l*e+4*c]+","+n[4*l*e+4*c+1]+","+n[4*l*e+4*c+2]+")",s.push(new u(c,l,t)));o=s.length}))}function c(){e.update(),a.clearRect(0,0,r.width,r.height);for(var t=0;t<o;t++){var n=s[t];n.update(),n.draw()}requestAnimationFrame(c)}h=navigator.userAgent.indexOf("iPhone")>0||navigator.userAgent.indexOf("Android")>0&&navigator.userAgent.indexOf("Mobile")>0||navigator.userAgent.indexOf("iPad")>0||navigator.userAgent.indexOf("Android")>0?50:200}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhcnRpY2xlLmpzIiwid2VicGFjazovLy8uL3NyYy9tYWluLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVXRpbHMiLCJtaW4iLCJtYXgiLCJub3JtIiwic291cmNlTWluIiwic291cmNlTWF4IiwiZGVzdE1pbiIsImRlc3RNYXgiLCJsZXJwIiwiTWF0aCIsInAwIiwicDEiLCJkeCIsIngiLCJkeSIsInkiLCJzcXJ0IiwieDAiLCJ5MCIsIngxIiwieTEiLCJjMCIsImMxIiwiZGlzdGFuY2UiLCJyYWRpdXMiLCJjaXJjbGUiLCJkaXN0YW5jZVhZIiwicmVjdCIsImluUmFuZ2UiLCJ3aWR0aCIsImhlaWdodCIsIm1pbjAiLCJtYXgwIiwibWluMSIsIm1heDEiLCJyMCIsInIxIiwicmFuZ2VJbnRlcnNlY3QiLCJkZWdyZWVzIiwiUEkiLCJyYWRpYW5zIiwicmFuZG9tIiwiZmxvb3IiLCJpdGVyYXRpb25zIiwidG90YWwiLCJyYW5kb21SYW5nZSIsImNvbG9ycyIsImxlbmd0aCIsIm1vdXNlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiY2xpZW50WCIsImNsaWVudFkiLCJQYXJ0aWNsZSIsImNvbG9yIiwidGhpcyIsImNhbnZhcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImN0eCIsImdldENvbnRleHQiLCJ4MiIsInkyIiwidngiLCJ2eSIsImF4IiwiYXkiLCJmcmljdGlvbiIsInNwZWVkIiwiZGlzdCIsInNhdmUiLCJiZWdpblBhdGgiLCJhcmMiLCJmaWxsU3R5bGUiLCJmaWxsIiwicmVzdG9yZSIsInN0YXRzIiwiU3RhdHMiLCJkb21FbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJyaWdodCIsImdldEVsZW1lbnRCeUlkIiwiYXBwZW5kQ2hpbGQiLCJpbml0IiwicmVuZGVyIiwib25yZXNpemUiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJwYXJ0aWNsZXMiLCJvZmZzY3JlZW5jYW52YXMiLCJjcmVhdGVFbGVtZW50Iiwib2Zmc2NyZWVuY3R4IiwiYW1vdW50Iiwic2tpcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiV0lEVEgiLCJIRUlHSFQiLCJpbWciLCJJbWFnZSIsInNyYyIsImRyYXdJbWFnZSIsImltZ0RhdGEiLCJnZXRJbWFnZURhdGEiLCJkYXRhIiwicm91bmQiLCJwdXNoIiwidXBkYXRlIiwiY2xlYXJSZWN0IiwiZHJhdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFP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QUFHRSxFQUFHd0MsS0FJOUN3QyxFQUFTSixFQUFVNUMsVUFhM0IsU0FBU3dDLElBQ0xWLEVBQU1tQyxTQUNOcEQsRUFBSXFELFVBQVUsRUFBRyxFQUFHeEQsRUFBTzVCLE1BQU80QixFQUFPM0IsUUFDekMsSUFBSyxJQUFJOUQsRUFBSSxFQUFHQSxFQUFJK0gsRUFBUS9ILElBQUssQ0FDN0IsSUFBSThCLEVBQUk2RixFQUFVM0gsR0FDbEI4QixFQUFFa0gsU0FDRmxILEVBQUVvSCxPQUVOakIsc0JBQXNCVixHQTlEdEJTLEVBREFtQixVQUFVQyxVQUFVQyxRQUFRLFVBQVksR0FBS0YsVUFBVUMsVUFBVUMsUUFBUSxXQUFhLEdBQUtGLFVBQVVDLFVBQVVDLFFBQVEsVUFBWSxHQUFLRixVQUFVQyxVQUFVQyxRQUFRLFFBQVUsR0FBS0YsVUFBVUMsVUFBVUMsUUFBUSxXQUFhLEVBQ3JOLEdBRUEsSUF6QmYiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiZXhwb3J0IGNsYXNzIFV0aWxzIHtcclxuICAgIHN0YXRpYyBub3JtKHZhbHVlLCBtaW4sIG1heCkge1xyXG4gICAgICAgIHJldHVybiAodmFsdWUgLSBtaW4pIC8gKG1heCAtIG1pbik7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgbGVycChub3JtLCBtaW4sIG1heCkge1xyXG4gICAgICAgIHJldHVybiAobWF4IC0gbWluKSAqIG5vcm0gKyBtaW47XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgbWFwKHZhbHVlLCBzb3VyY2VNaW4sIHNvdXJjZU1heCwgZGVzdE1pbiwgZGVzdE1heCkge1xyXG4gICAgICAgIHJldHVybiBVdGlscy5sZXJwKFV0aWxzLm5vcm0odmFsdWUsIHNvdXJjZU1pbiwgc291cmNlTWF4KSwgZGVzdE1pbiwgZGVzdE1heCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgTWF0aC5taW4obWluLCBtYXgpKSwgTWF0aC5tYXgobWluLCBtYXgpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGlzdGFuY2UocDAsIHAxKSB7XHJcbiAgICAgICAgdmFyIGR4ID0gcDEueCAtIHAwLngsXHJcbiAgICAgICAgICAgIGR5ID0gcDEueSAtIHAwLnk7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGRpc3RhbmNlWFkoeDAsIHkwLCB4MSwgeTEpIHtcclxuICAgICAgICB2YXIgZHggPSB4MSAtIHgwLFxyXG4gICAgICAgICAgICBkeSA9IHkxIC0geTA7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNpcmNsZUNvbGxpc2lvbihjMCwgYzEpIHtcclxuICAgICAgICByZXR1cm4gVXRpbHMuZGlzdGFuY2UoYzAsIGMxKSA8PSBjMC5yYWRpdXMgKyBjMS5yYWRpdXM7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNpcmNsZVBvaW50Q29sbGlzaW9uKHgsIHksIGNpcmNsZSkge1xyXG4gICAgICAgIHJldHVybiBVdGlscy5kaXN0YW5jZVhZKHgsIHksIGNpcmNsZS54LCBjaXJjbGUueSkgPCBjaXJjbGUucmFkaXVzO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwb2ludEluUmVjdCh4LCB5LCByZWN0KSB7XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLmluUmFuZ2UoeCwgcmVjdC54LCByZWN0LnggKyByZWN0LndpZHRoKSAmJlxyXG4gICAgICAgICAgICBVdGlscy5pblJhbmdlKHksIHJlY3QueSwgcmVjdC55ICsgcmVjdC5oZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpblJhbmdlKHZhbHVlLCBtaW4sIG1heCkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSA+PSBNYXRoLm1pbihtaW4sIG1heCkgJiYgdmFsdWUgPD0gTWF0aC5tYXgobWluLCBtYXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByYW5nZUludGVyc2VjdChtaW4wLCBtYXgwLCBtaW4xLCBtYXgxKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KG1pbjAsIG1heDApID49IE1hdGgubWluKG1pbjEsIG1heDEpICYmXHJcbiAgICAgICAgICAgIE1hdGgubWluKG1pbjAsIG1heDApIDw9IE1hdGgubWF4KG1pbjEsIG1heDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZWN0SW50ZXJzZWN0KHIwLCByMSkge1xyXG4gICAgICAgIHJldHVybiBVdGlscy5yYW5nZUludGVyc2VjdChyMC54LCByMC54ICsgcjAud2lkdGgsIHIxLngsIHIxLnggKyByMS53aWR0aCkgJiZcclxuICAgICAgICAgICAgVXRpbHMucmFuZ2VJbnRlcnNlY3QocjAueSwgcjAueSArIHIwLmhlaWdodCwgcjEueSwgcjEueSArIHIxLmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGRlZ3JlZXNUb1JhZHMoZGVncmVlcykge1xyXG4gICAgICAgIHJldHVybiBkZWdyZWVzIC8gMTgwICogTWF0aC5QSTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmFkc1RvRGVncmVlcyhyYWRpYW5zKSB7XHJcbiAgICAgICAgcmV0dXJuIHJhZGlhbnMgKiAxODAgLyBNYXRoLlBJO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByYW5kb21SYW5nZShtaW4sIG1heCkge1xyXG4gICAgICAgIHJldHVybiBtaW4gKyBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJhbmRvbUludChtaW4sIG1heCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKG1pbiArIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByYW5kb21EaXN0KG1pbiwgbWF4LCBpdGVyYXRpb25zKSB7XHJcbiAgICAgICAgdmFyIHRvdGFsID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgdG90YWwgKz0gVXRpbHMucmFuZG9tUmFuZ2UobWluLCBtYXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG90YWwgLyBpdGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByYW5kb21Db2xvcihjb2xvcnMpIHtcclxuICAgICAgICByZXR1cm4gY29sb3JzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbG9ycy5sZW5ndGgpXVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL3V0aWwnO1xyXG5cclxuY29uc3QgbW91c2UgPSB7fTtcclxuLy8gY29uc3QgY29sb3JzID0gW1wiIzQ2ODk2NlwiLFwiI0ZGRjBBNVwiLCBcIiNGRkIwM0JcIixcIiNCNjQ5MjZcIiwgXCIjOEUyODAwXCJdO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gIG1vdXNlLnggPSBldmVudC5jbGllbnRYO1xyXG4gIG1vdXNlLnkgPSBldmVudC5jbGllbnRZO1xyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcnRpY2xlIHtcclxuICBjb25zdHJ1Y3Rvcih4LCB5LCBjb2xvcikge1xyXG4gICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FudmFzJyk7XHJcbiAgICB0aGlzLmN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICB0aGlzLnggPSBNYXRoLnJhbmRvbSgpICogdGhpcy5jYW52YXMud2lkdGg7XHJcbiAgICB0aGlzLnkgPSBNYXRoLnJhbmRvbSgpICogdGhpcy5jYW52YXMuaGVpZ2h0O1xyXG4gICAgdGhpcy54MiA9IHg7XHJcbiAgICB0aGlzLnkyID0geTtcclxuICAgIHRoaXMudnggPSAwO1xyXG4gICAgdGhpcy52eSA9IDA7XHJcbiAgICB0aGlzLmR4ID0gMDtcclxuICAgIHRoaXMuZHkgPSAwO1xyXG4gICAgdGhpcy5heCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuICAgIHRoaXMuYXkgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICB0aGlzLnJhZGl1cyA9IDI7XHJcbiAgICB0aGlzLmZyaWN0aW9uID0gTWF0aC5yYW5kb20oKSAqIDAuMDUgKyAwLjk0O1xyXG4gICAgdGhpcy5zcGVlZCA9IDIwO1xyXG4gIH1cclxuICB1cGRhdGUoKSB7XHJcbiAgICB0aGlzLmRpc3QgPSBVdGlscy5kaXN0YW5jZVhZKHRoaXMueCwgdGhpcy55LCBtb3VzZS54LCBtb3VzZS55KTtcclxuICAgIGlmICh0aGlzLmRpc3QgPCB0aGlzLnJhZGl1cyAqIDIwKSB7XHJcbiAgICAgIHRoaXMuZHggKz0gdGhpcy5heCAqIG1vdXNlLnggLyAzMDA7XHJcbiAgICAgIHRoaXMuZHkgKz0gdGhpcy5heSAqIG1vdXNlLnkgLyAzMDA7XHJcbiAgICB9XHJcbiAgICB0aGlzLnZ4ID0gKHRoaXMueDIgLSB0aGlzLngpIC8gdGhpcy5zcGVlZDtcclxuICAgIHRoaXMudnkgPSAodGhpcy55MiAtIHRoaXMueSkgLyB0aGlzLnNwZWVkO1xyXG4gICAgdGhpcy54ICs9IHRoaXMudng7XHJcbiAgICB0aGlzLnkgKz0gdGhpcy52eTtcclxuICAgIHRoaXMuZHggKj0gdGhpcy5mcmljdGlvbjtcclxuICAgIHRoaXMuZHkgKj0gdGhpcy5mcmljdGlvbjtcclxuICAgIHRoaXMueCArPSB0aGlzLmR4O1xyXG4gICAgdGhpcy55ICs9IHRoaXMuZHk7XHJcbiAgfVxyXG4gIGRyYXcoKSB7XHJcbiAgICB0aGlzLmN0eC5zYXZlKCk7XHJcbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgIHRoaXMuY3R4LmFyYyh0aGlzLngsIHRoaXMueSwgdGhpcy5yYWRpdXMsIDAsIE1hdGguUEkgKiAyLCBmYWxzZSk7XHJcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgdGhpcy5jdHguZmlsbCgpXHJcbiAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgUGFydGljbGUgfSBmcm9tICcuL3BhcnRpY2xlJztcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL3V0aWwnO1xyXG4vLyBpbXBvcnQgeyBTdGF0cyB9IGZyb20gJy4vc3RhdHMnO1xyXG5cclxuKCgpID0+IHtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbml0U3RhdHMoKTtcclxuICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgcmVuZGVyKCk7XHJcbiAgICB9KVxyXG5cclxuICAgIHdpbmRvdy5vbnJlc2l6ZSA9ICgpID0+IHtcclxuICAgICAgICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIHBhcnRpY2xlcyA9IFtdO1xyXG4gICAgICAgIGluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvZmZzY3JlZW5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSxcclxuICAgICAgICBvZmZzY3JlZW5jdHggPSBvZmZzY3JlZW5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKSxcclxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FudmFzJyksXHJcbiAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgbGV0IGFtb3VudCA9IDAsIHBhcnRpY2xlcyA9IFtdLCBjb2xvciwgc3RhdHMsIHNraXAgPSAwO1xyXG5cclxuICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ2lQaG9uZScpID4gMCB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0FuZHJvaWQnKSA+IDAgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNb2JpbGUnKSA+IDAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdpUGFkJykgPiAwIHx8IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQW5kcm9pZCcpID4gMCkge1xyXG4gICAgICAgIHNraXAgPSA1MDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2tpcCA9IDIwMDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbml0KCkge1xyXG5cclxuICAgICAgICAvLyBSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcclxuICAgICAgICAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgY29uc3QgV0lEVEggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICBjb25zdCBIRUlHSFQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgIG9mZnNjcmVlbmNhbnZhcy53aWR0aCA9IFdJRFRIO1xyXG4gICAgICAgIG9mZnNjcmVlbmNhbnZhcy5oZWlnaHQgPSBIRUlHSFQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIGltZy5zcmMgPSAnLi9pbWFnZXMvaW1nMDIucG5nJztcclxuXHJcbiAgICAgICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9mZnNjcmVlbmN0eC5kcmF3SW1hZ2UoaW1nLCAoV0lEVEggLSBpbWcud2lkdGgpIC8gMiwgKEhFSUdIVCAtIGltZy5oZWlnaHQpIC8gMik7XHJcbiAgICAgICAgICAgIGNvbnN0IGltZ0RhdGEgPSBvZmZzY3JlZW5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIFdJRFRILCBIRUlHSFQpLmRhdGE7XHJcbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IFdJRFRIO1xyXG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gSEVJR0hUO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBXSURUSDsgeCArPSBNYXRoLnJvdW5kKFdJRFRIIC8gc2tpcCkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgSEVJR0hUOyB5ICs9IE1hdGgucm91bmQoV0lEVEggLyBza2lwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWdEYXRhWygoeCArIHkgKiBXSURUSCkgKiA0KSArIDNdID4gc2tpcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9IFwicmdiKFwiICsgaW1nRGF0YVsoeSAqIDQgKiBXSURUSCkgKyAoeCAqIDQpXSArIFwiLFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ0RhdGFbKHkgKiA0ICogV0lEVEgpICsgKHggKiA0KSArIDFdICsgXCIsXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nRGF0YVsoeSAqIDQgKiBXSURUSCkgKyAoeCAqIDQpICsgMl0gKyBcIilcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVzLnB1c2gobmV3IFBhcnRpY2xlKHgsIHksIGNvbG9yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFtb3VudCA9IHBhcnRpY2xlcy5sZW5ndGg7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbml0U3RhdHMoKSB7XHJcbiAgICAgICAgc3RhdHMgPSBuZXcgU3RhdHMoKTtcclxuICAgICAgICBzdGF0cy5kb21FbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICBzdGF0cy5kb21FbGVtZW50LnN0eWxlLmxlZnQgPSAnMHB4JztcclxuICAgICAgICBzdGF0cy5kb21FbGVtZW50LnN0eWxlLnJpZ2h0ID0gJzBweCc7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRzJykuYXBwZW5kQ2hpbGQoc3RhdHMuZG9tRWxlbWVudCk7XHJcbiAgICAgICAgcmV0dXJuIHN0YXRzO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAgICAgICBzdGF0cy51cGRhdGUoKTtcclxuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbW91bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgcCA9IHBhcnRpY2xlc1tpXTtcclxuICAgICAgICAgICAgcC51cGRhdGUoKTtcclxuICAgICAgICAgICAgcC5kcmF3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xyXG4gICAgfVxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiIn0=